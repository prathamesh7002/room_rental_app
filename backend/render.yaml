services:
  - type: web
    name: room-rental-backend
    env: python
    buildCommand: "pip install -r requirements.txt && python manage.py collectstatic --noinput && python manage.py migrate"
    startCommand: "daphne -b 0.0.0.0 -p $PORT room_rental.asgi:application"
    envVars:
      - key: ENVIRONMENT
        value: production
      - key: DEBUG
        value: False
      - key: PYTHON_VERSION
        value: 3.11.0
      - key: DATABASE_ENGINE
        value: django.db.backends.postgresql
      - key: SECURE_SSL_REDIRECT
        value: True
      - key: SESSION_COOKIE_SECURE
        value: True
      - key: CSRF_COOKIE_SECURE
        value: True
    
  - type: pserv
    name: room-rental-postgres
    env: postgresql
    plan: starter
    
  - type: redis
    name: room-rental-redis
    plan: starter
